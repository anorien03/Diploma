<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:ContainerPackingApp.ViewModels"
        mc:Ignorable="d" 
        d:DesignWidth="800" 
        d:DesignHeight="600"
        x:Class="ContainerPackingApp.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Container Packing Genetic Algorithm">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <ScrollViewer>
        <StackPanel Margin="20" Spacing="10">
            <TextBlock Text="Genetic Algorithm Parameters" FontSize="16" FontWeight="Bold"/>
            
            <Grid ColumnDefinitions="200,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto" RowSpacing="5">
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Population Size:" VerticalAlignment="Center"/>
                <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding PopulationSize}"/>
                
                <TextBlock Grid.Row="1" Grid.Column="0" Text="Generations Count:" VerticalAlignment="Center"/>
                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding GenerationsCount}"/>
                
                <TextBlock Grid.Row="2" Grid.Column="0" Text="Mutation Rate (%):" VerticalAlignment="Center"/>
                <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding MutationRate}"/>
                
                <TextBlock Grid.Row="3" Grid.Column="0" Text="Tournament Size:" VerticalAlignment="Center"/>
                <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding TournamentSize}"/>
                
                <TextBlock Grid.Row="4" Grid.Column="0" Text="Elitism (%):" VerticalAlignment="Center"/>
                <TextBox Grid.Row="4" Grid.Column="1" Text="{Binding Elitism}"/>
            </Grid>
            
            <Separator Margin="0,10"/>
            
            <TextBlock Text="Ship Hold Parameters" FontSize="16" FontWeight="Bold"/>
            
            <Grid ColumnDefinitions="200,*" RowDefinitions="Auto,Auto,Auto,Auto" RowSpacing="5">
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Length:" VerticalAlignment="Center"/>
                <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding ShipHoldLength}"/>
                
                <TextBlock Grid.Row="1" Grid.Column="0" Text="Width:" VerticalAlignment="Center"/>
                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding ShipHoldWidth}"/>
                
                <TextBlock Grid.Row="2" Grid.Column="0" Text="Height:" VerticalAlignment="Center"/>
                <TextBox Grid.Row="2" Grid.Column="1" Text="{Binding ShipHoldHeight}"/>
                
                <TextBlock Grid.Row="3" Grid.Column="0" Text="Max Weight:" VerticalAlignment="Center"/>
                <TextBox Grid.Row="3" Grid.Column="1" Text="{Binding ShipHoldMaxWeight}"/>
            </Grid>
            
            <Separator Margin="0,10"/>
            
            <StackPanel>
                <TextBlock Text="Containers" FontSize="16" FontWeight="Bold"/>
                <Button Content="Add Container" Command="{Binding AddContainer}" Margin="0,5"/>
                
                <ItemsControl ItemsSource="{Binding Containers}" Margin="0,10">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="vm:ContainerViewModel">
                            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="10" Margin="0,5">
                                <Grid ColumnDefinitions="*,*,*,*,*,Auto" RowSpacing="5">
                                    <TextBlock Grid.Column="0" Text="ID:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding Id}" Width="60"/>
                                    
                                    <TextBlock Grid.Column="2" Text="Length:" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                    <TextBox Grid.Column="3" Text="{Binding Length}" Width="60"/>
                                    
                                    <TextBlock Grid.Column="4" Text="Width:" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                    <TextBox Grid.Column="5" Text="{Binding Width}" Width="60"/>
                                    
                                    <TextBlock Grid.Column="0" Text="Height:" VerticalAlignment="Center" Grid.Row="1"/>
                                    <TextBox Grid.Column="1" Text="{Binding Height}" Width="60" Grid.Row="1"/>
                                    
                                    <TextBlock Grid.Column="2" Text="Weight:" VerticalAlignment="Center" Margin="10,0,0,0" Grid.Row="1"/>
                                    <TextBox Grid.Column="3" Text="{Binding Weight}" Width="60" Grid.Row="1"/>
                                    
                                    <Button Grid.Column="5" Grid.Row="1" Content="Remove" 
                                            Command="{Binding $parent[ItemsControl].DataContext.RemoveContainer}"
                                            CommandParameter="{Binding}"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
            
            <Separator Margin="0,10"/>
<Button Content="Run Algorithm" Command="{Binding RunAlgorithm}" IsEnabled="{Binding !IsRunning}"/>
            
            <ScrollViewer Height="100" VerticalScrollBarVisibility="Auto" Margin="0,10">
                <TextBox Text="{Binding ResultText}" IsReadOnly="True" AcceptsReturn="True" 
                         TextWrapping="Wrap" Background="Transparent" BorderThickness="0"/>
            </ScrollViewer>
        </StackPanel>
    </ScrollViewer>
</Window>